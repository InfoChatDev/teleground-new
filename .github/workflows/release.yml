# This workflow will publish an alpha release when a PR is merged into master
name: Rust Alpha Release

on:
  pull_request:
    types: [closed]
    branches:
      - master

jobs:
  release:
    if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install Rust
        uses: actions-rs/toolchain@v1
        with:
          toolchain: stable
          override: true
      - name: Build release
        run: cargo build --release
      - name: Create Release
        id: create_release
        uses: softprops/action-gh-release@v2
        with:
          tag_name: alpha-${{ github.run_number }}
          name: Alpha Release ${{ github.run_number }}
          body: |
            # ğŸš€ è‡ªåŠ¨å‘å¸ƒ Alpha ç‰ˆæœ¬

            |  |  |
            |---|---|
            | ğŸ”— **PR** | [${{ github.event.pull_request.html_url }}](${{ github.event.pull_request.html_url }}) |
            | ğŸ‘¤ **ä½œè€…** | ${{ github.event.pull_request.user.login }} |
            | ğŸ¤ **åˆå¹¶è€…** | ${{ github.actor }} |
            | ğŸ“¦ **ä¸‹è½½é“¾æ¥** | [artifact](${{ github.server_url }}/${{ github.repository }}/releases/download/alpha-${{ github.run_number }}/release-binary) |

            ## ğŸ“ å˜æ›´è¯´æ˜
            ${{ github.event.pull_request.body }}

            ---

            <details>
            <summary>ğŸ‡©ğŸ‡ª Deutsch</summary>

            ### ğŸš€ Automatische Alpha-Version verÃ¶ffentlicht

            |  |  |
            |---|---|
            | ğŸ”— **PR** | [${{ github.event.pull_request.html_url }}](${{ github.event.pull_request.html_url }}) |
            | ğŸ‘¤ **Autor** | ${{ github.event.pull_request.user.login }} |
            | ğŸ¤ **ZusammengefÃ¼hrt von** | ${{ github.actor }} |
            | ğŸ“¦ **Download-Link** | [artifact](${{ github.server_url }}/${{ github.repository }}/releases/download/alpha-${{ github.run_number }}/release-binary) |

            #### ğŸ“ Ã„nderungsprotokoll
            ${{ github.event.pull_request.body }}
            </details>

            <details>
            <summary>ğŸ‡¬ğŸ‡§ English</summary>

            ### ğŸš€ Alpha Release Published Automatically

            |  |  |
            |---|---|
            | ğŸ”— **PR** | [${{ github.event.pull_request.html_url }}](${{ github.event.pull_request.html_url }}) |
            | ğŸ‘¤ **Author** | ${{ github.event.pull_request.user.login }} |
            | ğŸ¤ **Merged by** | ${{ github.actor }} |
            | ğŸ“¦ **Download Link** | [artifact](${{ github.server_url }}/${{ github.repository }}/releases/download/alpha-${{ github.run_number }}/release-binary) |

            #### ğŸ“ Changelog
            ${{ github.event.pull_request.body }}
            </details>

            <details>
            <summary>ğŸ‡ªğŸ‡¸ EspaÃ±ol</summary>

            ### ğŸš€ VersiÃ³n Alpha publicada automÃ¡ticamente

            |  |  |
            |---|---|
            | ğŸ”— **PR** | [${{ github.event.pull_request.html_url }}](${{ github.event.pull_request.html_url }}) |
            | ğŸ‘¤ **Autor** | ${{ github.event.pull_request.user.login }} |
            | ğŸ¤ **Fusionado por** | ${{ github.actor }} |
            | ğŸ“¦ **Enlace de descarga** | [artifact](${{ github.server_url }}/${{ github.repository }}/releases/download/alpha-${{ github.run_number }}/release-binary) |

            #### ğŸ“ Registro de cambios
            ${{ github.event.pull_request.body }}
            </details>

            <details>
            <summary>ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</summary>

            ### ğŸš€ ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ¾Ğ²Ğ°Ğ½ Ğ°Ğ»ÑŒÑ„Ğ°-Ñ€ĞµĞ»Ğ¸Ğ·

            |  |  |
            |---|---|
            | ğŸ”— **PR** | [${{ github.event.pull_request.html_url }}](${{ github.event.pull_request.html_url }}) |
            | ğŸ‘¤ **ĞĞ²Ñ‚Ğ¾Ñ€** | ${{ github.event.pull_request.user.login }} |
            | ğŸ¤ **Ğ¡Ğ»Ğ¸Ğ»** | ${{ github.actor }} |
            | ğŸ“¦ **Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ´Ğ»Ñ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ** | [artifact](${{ github.server_url }}/${{ github.repository }}/releases/download/alpha-${{ github.run_number }}/release-binary) |

            #### ğŸ“ Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
            ${{ github.event.pull_request.body }}
            </details>

            <details>
            <summary>ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</summary>

            ### ğŸš€ Alphaãƒªãƒªãƒ¼ã‚¹ãŒè‡ªå‹•å…¬é–‹ã•ã‚Œã¾ã—ãŸ

            |  |  |
            |---|---|
            | ğŸ”— **PR** | [${{ github.event.pull_request.html_url }}](${{ github.event.pull_request.html_url }}) |
            | ğŸ‘¤ **ä½œæˆè€…** | ${{ github.event.pull_request.user.login }} |
            | ğŸ¤ **ãƒãƒ¼ã‚¸è€…** | ${{ github.actor }} |
            | ğŸ“¦ **ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯** | [artifact](${{ github.server_url }}/${{ github.repository }}/releases/download/alpha-${{ github.run_number }}/release-binary) |

            #### ğŸ“ å¤‰æ›´å†…å®¹
            ${{ github.event.pull_request.body }}
            </details>
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      - name: Upload Release Asset
        uses: softprops/action-gh-release@v2
        with:
          files: target/release/*
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
